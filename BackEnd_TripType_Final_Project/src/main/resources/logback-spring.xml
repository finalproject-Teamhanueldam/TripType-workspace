<?xml version="1.0" encoding="UTF-8"?>
<!-- logback 을 환경설정 (cofiguration) 하기 위한 파일 -->
<configuration>
	
	<!-- 
		1. 로깅 메세지 레벨
		> 기록되는 메세지에 "중요도" 를 나타내는 개념 (중요도를 매겨주겠다)
		  (총 6단계, 6단계로 갈 수록 더 중요, 1단계로 갈 수록 더 사소)
		> 1단계로 갈수록 더 사소하고 자주 일어남 (발생 빈도가 높아짐)
		  6단계로 갈수록 더 중요하고 적게 일어나야함
		
		- TRACE : 가장 상세한 로그
				  프로그램 내에서 발생하는 모든 사소한 작업을 일일이 다 기록하는 수준
				  (매우 시시콜콜한거까지 다 기록하는 수준이라 사용을 잘 안함)
		- DEBUG : 개발할 때 필요에 의해서 확인해야하는 부분에 대한 기록
				  프로그램 코드 흐름 상 어느 시점에 어느 변수에 무슨 값이 들어있는지 등 출력하는데 많이 쓰임
				  (말 그대로 개발자가 오류를 찾을 때 자주 사용함)
		- INFO : 정상적인 프로그래밍 흐름의 경우 사용자에게 알려줘야 하는 부분에 대한 기록
				 (개발 단계가 아닌 배포, 운영 단계에서 사용자를 위해 주로 사용됨)
		- WARN : 잠재적인 문제 상황에 대한 기록
				 실행은 되지만 추후 문제가 생길 소지가 있을 경우의 기록을 남김
		- ERROR : 어떠한 문제에 의해 실행이 아예 안되는 경우의 기록
				  (주로 런타임 에러, 예외와 관련된 기록을 많이 남김)
		- FATAL : 시스템에 치명적인 오류의 기록
				  프로그램을 돌리기 위한 컴퓨터 시스템 자체의 문제를 기록
				  (logback 은 따로 FATAL 출력 구문을 제공해주지 않음)
				  
		2. logback-spring.xml 파일의 설정 태그와 그 역할
		- appender 태그 : 로깅을 어디에 할지에 대한 설정 (콘솔, 파일, 이메일, ...)
		- logger 태그 : 로깅을 수행하기 위한 Logger 객체에 대한 설정
		- root 태그 : 전반적인 로깅 설정을 담당
					 logger 태그로 설정한 나머지 것들에 대해 설정할 때 주로 사용
		
		3. 메세지 레이아웃
		- %level : 메세지 레벨, -5level 은 해당 메세지 레벨을 5칸 왼쪽에다가 적겠다 라는 뜻 (옵션 활용 가능)
		- %logger : 로거 정보, 즉, 로깅이 발생한 풀클래스명
		- %msg : 메세지 내용
		- %n : 개행문자 (\n 을 의미)
		- %d : 시간 정보, 그냥 작성할 경우 "년-월-일 시:분:초,밀리세컨초"
			   커스터마이징도 가능함!! %d{날짜형식커스터마이징} (SimpleDateFormat 형식과 똑같음)
		
		4. 사용 가능한 Appender 종류들
		- ConsoleAppender : 로그를 콘솔에 출력해주는 클래스
		- FileAppender : 로그를 파일에 출력해주는 클래스 (단순히 파일에만 출력하겠다)
		- RollingFileAppender : 로그를 파일에 출력해주는 클래스 (파일의 용량 또는 날짜에 따라 로그 파일을 분리해주겠다) 
		- SMTPAppender : 로그 내용을 이메일로 전송해주는 클래스
		- DBAppender : 로그 내용을 DB 에 저장해주는 클래스
		  (실무에서는 로그 내용을 보통 메일이나 DB 에는 잘 안남김)
	-->
	
	<!-- appender 영역 -->
	<!-- 콘솔 출력용 Appender -->
	<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
		<encoder>
			<pattern>[%-5level] - %msg : %logger %d{yyyy-MM-dd HH:mm:ss} %n</pattern>
		</encoder>
	</appender>
	
	<!-- 단순 파일 출력용 Appender -->
	<appender name="FILE" class="ch.qos.logback.core.FileAppender">
		<file>C:\mylog\out.log</file> 
		<!-- 
			로그를 남길 파일명
			파일명만 딸랑 쓸 경우 상대경로에 의해 이 프로젝트 폴더 내부에 파일이 바로 생성됨
			그게 싫으면 절대경로같은걸로 원하는 경로 지정 (실제 존재하는 경로로 제시)
		-->
		<append>true</append>
		<!-- true 는 이어쓰기를 하겠다. / false 는 덮어쓰겠다. (보통 실무에서는 로그를 이어씀) -->
		<encoder>
			<pattern>%-5level - %msg : %logger %d %n</pattern>
		</encoder>
	</appender>
	
	<!-- 날짜별 롤링 파일 Appender -->
	<appender name="DAILY" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<file>C:\mylog\daily.log</file>
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- 날짜별로 끊을지, 용량별로 끊을지 등의 옵션 선택 가능 -->
			<fileNamePattern>C:\mylog\daily-%d{yyyyMMdd}.log</fileNamePattern>
			<!-- 로그 파일명에 날짜 패턴 붙이기 가능 -->
		</rollingPolicy>
		<encoder>
			<pattern>[%-5level] - %msg : %logger %d{HH:mm:ss} %n</pattern>
		</encoder>
	</appender>
	
	<!-- logger 영역 -->
	<!-- 
		com.kh.backend 패키지 하위에서 모든 로그를 출력하겠다. 
		level 속성 값에 따라 어느 레벨 수준 이상부터만 출력을 할 지 컨트롤 가능!!
		
		- 주로 실무에서는 개발 단계에서 DEBUG 로 내린 후 작업
		  배포 전 INFO 수준으로 올려서 바로 배포함!! (DEBUG 구문이 살아있더라도 동작을 안하니깐)
		- appender 를 여러개 셋팅하고 한번에 여러 appender 로 여러군데에 출력도 가능!!
	-->
	<logger name="com.kh.triptype" level="INFO">
		<appender-ref ref="CONSOLE" />
		<appender-ref ref="FILE" />
	</logger>
	
	<!-- root 영역 -->
	<!-- 
		스프링, 마이바티스 등에서 이미 작성된 로그 출력 구문을 차단하고 싶다면?
		root 태그를 이용해서 전체 애플리케이션 기본 로그를 OFF 로 차단할 수 있다.
		
		- 위의 logger 에서 설정한 com.kh.backend 하위의 코드가 아닌
		  다른 코드에서 발생하는 로그들은 다 막아버리겠다. (즉, 써드파티 로그는 막겠다)
	-->
	<root level="INFO">
	    <appender-ref ref="FILE"/>
	    <appender-ref ref="DAILY"/>   <!-- ★ 추가 -->
	</root>
	
</configuration>




